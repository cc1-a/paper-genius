{% extends "admin/admin_layout.html" %}

{% block title %}Inventory Dashboard{% endblock %}

{% block content %}
    <div class="flex justify-between items-center mb-8">
        <h1 class="text-3xl font-bold text-gray-800">ðŸ“¦ Inventory Management</h1>
        <a href="{{ url_for('add_item') }}" class="bg-green-500 hover:bg-green-600 text-white px-6 py-3 rounded-lg font-bold shadow-md transition transform hover:scale-105">
            âž• Add New Item
        </a>
    </div>

    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
        {% for item in items %}
        <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-5 hover:shadow-md transition duration-200 relative group">
            
            <!-- Header -->
            <div class="flex justify-between items-start mb-3 border-b border-gray-100 pb-3">
                <h3 class="text-lg font-bold text-gray-800">{{ item.name }}</h3>
                <span class="text-xs text-gray-400 bg-gray-100 px-2 py-1 rounded">ID: {{ item.id }}</span>
            </div>
            
            <!-- Image Preview -->
            <div class="mb-4 h-32 w-full bg-gray-100 rounded-md overflow-hidden flex items-center justify-center">
                {% if item.img.startswith('http') %}
    <img src="{{ item.img }}" alt="{{ item.name }}" class="object-contain h-full w-full opacity-90 group-hover:opacity-100 transition">
{% else %}
    <img src="{{ url_for('static', filename=item.img) }}" alt="{{ item.name }}" class="object-contain h-full w-full opacity-90 group-hover:opacity-100 transition">
{% endif %}
            </div>

            <!-- Stats -->
            <div class="text-sm text-gray-600 space-y-1 mb-4">
                <p><strong>Years Available:</strong> {{ item.years_available|length }} variants</p>
                <p><strong>Added:</strong> {{ item.date_added.strftime('%Y-%m-%d') }}</p>
            </div>

            <!-- Actions -->
            <div class="flex space-x-2 mt-auto pt-3 border-t border-gray-100">
                <a href="{{ url_for('edit_item', item_id=item.id) }}" class="flex-1 text-center bg-blue-50 text-blue-600 hover:bg-blue-100 py-2 rounded-lg font-semibold text-sm transition">
                    Edit
                </a>
                
                <form method="POST" action="{{ url_for('delete_item', item_id=item.id) }}" onsubmit="return confirm('Delete {{ item.name }}?');" class="flex-1">
                    <button type="submit" class="w-full bg-red-50 text-red-600 hover:bg-red-100 py-2 rounded-lg font-semibold text-sm transition">
                        Delete
                    </button>
                </form>
            </div>
        </div>
        {% endfor %}
    </div>
{% endblock %}